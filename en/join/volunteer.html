<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>FRV — Become a Volunteer</title>
  <meta name="description" content="Volunteer with Future Ready Vietnam — teach and mentor for free."/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../style.css"/>
  <style>
    .page-wrap{position:relative;z-index:5}
    .form-wrap{padding:120px 10% 60px;max-width:980px;margin:auto}
    form{background:#fff;border:1px solid #eee;border-radius:16px;padding:22px 18px;box-shadow:0 10px 24px rgba(0,0,0,.06)}
    .row{display:grid;gap:14px;grid-template-columns:1fr 1fr}
    .row-1{display:grid;gap:14px;grid-template-columns:1fr}
    label{font-weight:600;margin-top:8px;display:block}
    input,select,textarea{
      width:100%;padding:12px 14px;border:1px solid #e6e6e6;border-radius:12px;
      font:500 14px/1.4 'Montserrat',sans-serif;color:#333;background:#fff
    }
    textarea{min-height:120px;resize:vertical}
    .hint{color:var(--soft);font-size:12px;margin-top:4px}
    .checkset{display:flex;flex-wrap:wrap;gap:10px}
    .chip{display:inline-flex;align-items:center;gap:8px;border:1px solid #e6e6e6;border-radius:22px;padding:8px 12px;background:#fff;line-height:1;user-select:none;cursor:pointer}
    .chip input[type="checkbox"]{appearance:auto;position:static;width:auto;height:auto;margin:0;flex:0 0 auto}
    .chip span{white-space:nowrap;display:inline-block}
    .form-banner{width:100%;height:140px;object-fit:cover;border-radius:12px;opacity:.9;margin:0 0 12px 0;display:block}
    .actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:16px}
    .note{margin-top:8px;color:var(--soft);font-size:13px}
    .ok{color:#19764b}
    .logo{height:40px}
    .logo-frv{height:28px}
  </style>
</head>
<body>
  <div class="page-wrap">
    <header class="header">
      <a class="brand" href="../../english.html">
        <!-- Logo chính -->
        <img data-key="logo_main" class="logo" alt="Future Ready Vietnam">
      </a>
      <nav class="nav">
        <a class="nav-link" href="../about.html">About Us</a>
        <a class="nav-link" href="../journey.html">Journey</a>
        <div class="dropdown" data-dropdown>
          <button type="button">Programs ▾</button>
          <div class="dropdown-menu">
            <a class="nav-link" href="../program_music.html">Music</a>
            <a class="nav-link" href="../program_science.html">Science</a>
            <a class="nav-link" href="../program_math.html">Math</a>
            <a class="nav-link" href="../program_vietnamese.html">Vietnamese</a>
            <a class="nav-link" href="../program_english.html">English</a>
            <a class="nav-link" href="../program_compsci.html">Computer Science</a>
          </div>
        </div>
        <a class="nav-link" href="./">Join</a>
        <div class="dropdown align-right" data-dropdown>
          <button type="button">Support ▾</button>
          <div class="dropdown-menu">
            <a class="nav-link" href="../help/financial.html">Support Financially</a>
            <a class="nav-link" href="../help/supplies.html">Support with Study Supplies</a>
          </div>
        </div>
      </nav>
    </header>

    <main class="form-wrap">
      <h1 class="title">Become a Volunteer</h1>
      <p class="slogan reveal">Share your skills — free classes, big impact. Please fill in the form below.</p>

      <!-- banner hoa lá -->
      <img data-key="flowers_banner" class="form-banner" alt="flowers banner">

      <form id="volForm" action="https://formspree.io/f/YOUR_FORMSPREE_ID" method="POST" data-mailto="futurereadyvn@gmail.com" novalidate>
        <div class="row">
          <div>
            <label for="full_name">Full Name *</label>
            <input id="full_name" name="Full Name" type="text" required placeholder="Nguyen Van A">
          </div>
          <div>
            <label for="email">Email *</label>
            <input id="email" name="Email" type="email" required placeholder="you@example.com">
          </div>
        </div>

        <div class="row">
          <div>
            <label for="age_band">Are you under or over 18? *</label>
            <select id="age_band" name="Age Band" required>
              <option value="">Choose…</option>
              <option>Under 18</option>
              <option>18 or over</option>
            </select>
          </div>
          <div id="schoolOrWorkWrap">
            <label for="school_or_work">School / University / Occupation *</label>
            <input id="school_or_work" name="School/University/Occupation" type="text" required placeholder="BVIS / HCMUS / Student / Intern …">
            <div class="hint">If under 18 → your school · If 18+ → university or current job</div>
          </div>
        </div>

        <div class="row-1">
          <label>Which subjects would you like to teach?</label>
          <div class="checkset">
            <label class="chip"><input type="checkbox" name="Subjects" value="Music"><span>Music</span></label>
            <label class="chip"><input type="checkbox" name="Subjects" value="Science"><span>Science</span></label>
            <label class="chip"><input type="checkbox" name="Subjects" value="Math"><span>Math</span></label>
            <label class="chip"><input type="checkbox" name="Subjects" value="Vietnamese"><span>Vietnamese</span></label>
            <label class="chip"><input type="checkbox" name="Subjects" value="English"><span>English</span></label>
            <label class="chip"><input type="checkbox" name="Subjects" value="Computer Science"><span>Computer Science</span></label>
          </div>
        </div>

        <div class="row-1">
          <label for="motivation">Why do you want to help? *</label>
          <textarea id="motivation" name="Motivation" required placeholder="Tell us about your reason to volunteer…"></textarea>
        </div>

        <input type="hidden" name="_subject" value="FRV — New Volunteer Application">
        <input type="hidden" name="_template" value="table">

        <div class="actions">
          <button class="btn" type="submit">Send Application</button>
          <a class="btn nav-link" href="./">Back</a>
        </div>
        <div id="status" class="note"></div>
      </form>
    </main>

    <footer class="footer">
      <div class="frv">
        <!-- Logo FRV footer -->
        <img data-key="logo_frv" class="logo-frv" alt="FRV">
        <strong>FRV</strong>
      </div>
      <div><a href="mailto:futurereadyvn@gmail.com">futurereadyvn@gmail.com</a></div>
    </footer>
    <div class="footer copyright">© Future Ready Vietnam 2025 — A Charity of Knowledge.</div>
  </div>

  <!-- nền pastel + hoa lá động -->
  <div class="pastel-film"></div>
  <div class="floating">
    <img data-key="flower_floating_1" class="float-1" alt="">
    <img data-key="leaves_floating" class="float-2"  alt="">
    <img data-key="flower_floating_2" class="float-3" alt="">
  </div>

  <script src="../../app.js"></script>
  <script>
  /* ==== ROBUST IMAGE LOADER (đa đường dẫn + đa tên file + SVG fallback) ==== */
  (function(){
    // Các thư mục thử lần lượt (từ trang này /en/join/)
    const baseCandidates = [
      '../../assets/',        // root/assets
      '../assets/',           // en/assets
      '../../../assets/',     // nếu site lồng thêm 1 lớp
      '/assets/'              // deploy ở domain root
    ];
    // Bảng tên file có thể em đang dùng
    const files = {
      logo_main: ['logo_FutureReadyVietnam.svg','logo_future_ready_vietnam.svg','FutureReadyVietnam.svg','future.svg','logo_main.png','logo_main.svg'],
      logo_frv:  ['logo_FRV.svg','frv.svg','FRV.svg','logo_frv.png'],
      flowers_banner: ['flowers.svg','flower.svg','flowers.png','flower.png'],
      flower_floating_1: ['flowers.svg','flower.svg','flowers.png'],
      flower_floating_2: ['flowers.svg','flower.svg','flowers.png'],
      leaves_floating:  ['leaves.svg','leaf.svg','leaves.png','leaf.png']
    };

    function setFallbackSVG(img, type){
      // SVG tối giản phòng hờ (để không bao giờ "mất trắng")
      const svgMap = {
        logo_main:  '<svg width="160" height="40" xmlns="http://www.w3.org/2000/svg"><rect rx="8" ry="8" width="160" height="40" fill="#a8e6cf"/><text x="80" y="26" font-family="Montserrat,Arial" font-size="14" text-anchor="middle" fill="#2f2f2f">FUTURE READY VIETNAM</text></svg>',
        logo_frv:   '<svg width="60" height="28" xmlns="http://www.w3.org/2000/svg"><rect rx="6" ry="6" width="60" height="28" fill="#a8e6cf"/><text x="30" y="19" font-family="Montserrat,Arial" font-size="12" text-anchor="middle" fill="#2f2f2f">FRV</text></svg>',
        flowers:    '<svg width="200" height="140" xmlns="http://www.w3.org/2000/svg"><rect width="200" height="140" fill="#ffd1dc"/><circle cx="40" cy="70" r="16" fill="#fff"/><circle cx="90" cy="55" r="14" fill="#fff"/><circle cx="140" cy="80" r="18" fill="#fff"/></svg>',
        leaves:     '<svg width="200" height="140" xmlns="http://www.w3.org/2000/svg"><rect width="200" height="140" fill="#a8e6cf"/><path d="M20,120 C60,20 140,20 180,120" stroke="#fff" stroke-width="12" fill="none"/></svg>'
      };
      let svg = (type==='leaves') ? svgMap.leaves :
                (type==='flowers' || type==='flowers_banner' || type?.startsWith('flower_')) ? svgMap.flowers :
                (type==='logo_frv') ? svgMap.logo_frv : svgMap.logo_main;
      const blob = new Blob([svg], {type:'image/svg+xml'});
      img.src = URL.createObjectURL(blob);
    }

    document.querySelectorAll('img[data-key]').forEach(img=>{
      const key = img.getAttribute('data-key');
      const list = files[key] || [];
      let done = false;

      (function tryNextFile(fi = 0, bi = 0){
        if(done) return;
        if(fi >= list.length){ // hết tên file → dùng fallback SVG
          setFallbackSVG(img, key.includes('leaf') ? 'leaves' : key);
          return;
        }
        const fname = list[fi];
        if(bi >= baseCandidates.length){ // thử hết base cho cùng 1 tên → sang tên kế
          tryNextFile(fi+1, 0); return;
        }
        const url = baseCandidates[bi] + fname;
        const test = new Image();
        test.onload = ()=>{ img.src = url; done = true; };
        test.onerror = ()=>{ tryNextFile(fi, bi+1); };
        test.src = url;
      })();
    });
  })();

  // đổi nhãn field theo độ tuổi
  const ageSel = document.getElementById('age_band');
  ageSel.addEventListener('change', ()=>{
    const label = document.querySelector('#schoolOrWorkWrap label');
    if(ageSel.value==='Under 18'){ label.textContent='School *'; }
    else if(ageSel.value==='18 or over'){ label.textContent='University / Occupation *'; }
    else { label.textContent='School / University / Occupation *'; }
  });

  // Submit: Formspree ưu tiên, mailto fallback
  document.getElementById('volForm').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const form = e.currentTarget;
    const status = document.getElementById('status');
    status.textContent='';
    const endpoint = form.getAttribute('action');
    const isPlaceholder = /YOUR_FORMSPREE_ID/i.test(endpoint);

    const fd = new FormData(form);
    const lines = []; fd.forEach((v,k)=>lines.push(`${k}: ${v}`));

    if(!isPlaceholder){
      try{
        const res = await fetch(endpoint, { method:'POST', body: fd, headers: { 'Accept':'application/json' }});
        if(res.ok){ status.innerHTML='<span class="ok">✔ Sent! Thank you — we will email you soon.</span>'; form.reset(); return; }
        throw new Error('Formspree error');
      }catch(err){ /* fallback below */ }
    }
    const mail = form.dataset.mailto || 'futurereadyvn@gmail.com';
    const subject = encodeURIComponent('FRV — New Volunteer Application');
    const body = encodeURIComponent(lines.join('\n'));
    window.location.href = `mailto:${mail}?subject=${subject}&body=${body}`;
    status.innerHTML = '<span class="ok">Opening your email app to send the form…</span>';
  });
  </script>
</body>
</html>
